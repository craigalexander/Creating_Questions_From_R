<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6.1 Producing maps using ggmap | Visualising Data using R</title>
  <meta name="description" content="This short introductory module provides an introduction to using R and how to visualise data within R." />
  <meta name="generator" content="bookdown 0.32 and GitBook 2.6.7" />

  <meta property="og:title" content="6.1 Producing maps using ggmap | Visualising Data using R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This short introductory module provides an introduction to using R and how to visualise data within R." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6.1 Producing maps using ggmap | Visualising Data using R" />
  
  <meta name="twitter:description" content="This short introductory module provides an introduction to using R and how to visualise data within R." />
  

<meta name="author" content="Craig Alexander, Eilidh Jack &amp; Marnie Low" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="producing-maps-for-plotting.html"/>

<script src="assets/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="assets/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="assets/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="assets/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="assets/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Overview</a>
<ul>
<li class="chapter" data-level="1.1" data-path="the-ggplot2-package.html"><a href="the-ggplot2-package.html"><i class="fa fa-check"></i><b>1.1</b> The <code>ggplot2</code> package</a></li>
<li class="chapter" data-level="1.2" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>1.2</b> Data</a></li>
<li class="chapter" data-level="1.3" data-path="libraries.html"><a href="libraries.html"><i class="fa fa-check"></i><b>1.3</b> Libraries</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Getting Started</a>
<ul>
<li class="chapter" data-level="2.1" data-path="setting-up-r.html"><a href="setting-up-r.html"><i class="fa fa-check"></i><b>2.1</b> Setting up R</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="setting-up-r.html"><a href="setting-up-r.html#downloading-and-installing-r-for-windows"><i class="fa fa-check"></i><b>2.1.1</b> Downloading and installing R for Windows</a></li>
<li class="chapter" data-level="2.1.2" data-path="setting-up-r.html"><a href="setting-up-r.html#downloading-and-installing-r-for-mac"><i class="fa fa-check"></i><b>2.1.2</b> Downloading and installing R for Mac</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="rstudio.html"><a href="rstudio.html"><i class="fa fa-check"></i><b>2.2</b> RStudio</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="rstudio.html"><a href="rstudio.html#installing-rstudio-for-windowsmac"><i class="fa fa-check"></i><b>2.2.1</b> Installing RStudio for Windows/Mac</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="r-packages.html"><a href="r-packages.html"><i class="fa fa-check"></i><b>2.3</b> R packages</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="efficient-data-management-in-r.html"><a href="efficient-data-management-in-r.html"><i class="fa fa-check"></i><b>3</b> Efficient Data Management in R</a>
<ul>
<li class="chapter" data-level="3.1" data-path="tidyverse.html"><a href="tidyverse.html"><i class="fa fa-check"></i><b>3.1</b> Tidyverse</a></li>
<li class="chapter" data-level="3.2" data-path="pipelines.html"><a href="pipelines.html"><i class="fa fa-check"></i><b>3.2</b> Pipelines</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="pipelines.html"><a href="pipelines.html#task"><i class="fa fa-check"></i><b>3.2.1</b> Task</a></li>
<li class="chapter" data-level="3.2.2" data-path="pipelines.html"><a href="pipelines.html#solution"><i class="fa fa-check"></i><b>3.2.2</b> Solution</a></li>
<li class="chapter" data-level="3.2.3" data-path="pipelines.html"><a href="pipelines.html#task-1"><i class="fa fa-check"></i><b>3.2.3</b> Task</a></li>
<li class="chapter" data-level="3.2.4" data-path="pipelines.html"><a href="pipelines.html#answer"><i class="fa fa-check"></i><b>3.2.4</b> Answer</a></li>
<li class="chapter" data-level="3.2.5" data-path="pipelines.html"><a href="pipelines.html#additional-resources"><i class="fa fa-check"></i><b>3.2.5</b> Additional Resources</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="tibbles.html"><a href="tibbles.html"><i class="fa fa-check"></i><b>3.3</b> Tibbles</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="tibbles.html"><a href="tibbles.html#creating-tibbles"><i class="fa fa-check"></i><b>3.3.1</b> Creating tibbles</a></li>
<li class="chapter" data-level="3.3.2" data-path="tibbles.html"><a href="tibbles.html#working-with-tibbles"><i class="fa fa-check"></i><b>3.3.2</b> Working with tibbles</a></li>
<li class="chapter" data-level="3.3.3" data-path="tibbles.html"><a href="tibbles.html#subsetting-tibbles-always-results-in-a-tibble"><i class="fa fa-check"></i><b>3.3.3</b> Subsetting tibbles always results in a tibble</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="reading-in-data-using-readr.html"><a href="reading-in-data-using-readr.html"><i class="fa fa-check"></i><b>3.4</b> Reading in data using readr</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="reading-in-data-using-readr.html"><a href="reading-in-data-using-readr.html#task-2"><i class="fa fa-check"></i><b>3.4.1</b> Task</a></li>
<li class="chapter" data-level="3.4.2" data-path="reading-in-data-using-readr.html"><a href="reading-in-data-using-readr.html#answer-1"><i class="fa fa-check"></i><b>3.4.2</b> Answer</a></li>
<li class="chapter" data-level="3.4.3" data-path="reading-in-data-using-readr.html"><a href="reading-in-data-using-readr.html#specifying-column-types"><i class="fa fa-check"></i><b>3.4.3</b> Specifying column types</a></li>
<li class="chapter" data-level="3.4.4" data-path="reading-in-data-using-readr.html"><a href="reading-in-data-using-readr.html#additional-resources-1"><i class="fa fa-check"></i><b>3.4.4</b> Additional Resources</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="efficient-data-manipulation-using-dplyr.html"><a href="efficient-data-manipulation-using-dplyr.html"><i class="fa fa-check"></i><b>3.5</b> Efficient data manipulation using dplyr</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="efficient-data-manipulation-using-dplyr.html"><a href="efficient-data-manipulation-using-dplyr.html#overview-the-key-functions-verbs-for-dplyr"><i class="fa fa-check"></i><b>3.5.1</b> Overview: the key functions (“verbs”) for <code>dplyr</code></a></li>
<li class="chapter" data-level="3.5.2" data-path="efficient-data-manipulation-using-dplyr.html"><a href="efficient-data-manipulation-using-dplyr.html#selecting-observations-rows-using-filter-and-slice"><i class="fa fa-check"></i><b>3.5.2</b> Selecting observations (rows) using <code>filter</code> and <code>slice</code></a></li>
<li class="chapter" data-level="3.5.3" data-path="efficient-data-manipulation-using-dplyr.html"><a href="efficient-data-manipulation-using-dplyr.html#task-3"><i class="fa fa-check"></i><b>3.5.3</b> Task</a></li>
<li class="chapter" data-level="3.5.4" data-path="efficient-data-manipulation-using-dplyr.html"><a href="efficient-data-manipulation-using-dplyr.html#answer-2"><i class="fa fa-check"></i><b>3.5.4</b> Answer</a></li>
<li class="chapter" data-level="3.5.5" data-path="efficient-data-manipulation-using-dplyr.html"><a href="efficient-data-manipulation-using-dplyr.html#selecting-variables-columns-using-select"><i class="fa fa-check"></i><b>3.5.5</b> Selecting variables (columns) using <code>select</code></a></li>
<li class="chapter" data-level="3.5.6" data-path="efficient-data-manipulation-using-dplyr.html"><a href="efficient-data-manipulation-using-dplyr.html#adding-new-variables-using-mutate"><i class="fa fa-check"></i><b>3.5.6</b> Adding new variables using <code>mutate</code></a></li>
<li class="chapter" data-level="3.5.7" data-path="efficient-data-manipulation-using-dplyr.html"><a href="efficient-data-manipulation-using-dplyr.html#task-4"><i class="fa fa-check"></i><b>3.5.7</b> Task</a></li>
<li class="chapter" data-level="3.5.8" data-path="efficient-data-manipulation-using-dplyr.html"><a href="efficient-data-manipulation-using-dplyr.html#answer-3"><i class="fa fa-check"></i><b>3.5.8</b> Answer</a></li>
<li class="chapter" data-level="3.5.9" data-path="efficient-data-manipulation-using-dplyr.html"><a href="efficient-data-manipulation-using-dplyr.html#sorting-data-sets-using-arrange"><i class="fa fa-check"></i><b>3.5.9</b> Sorting data sets using <code>arrange</code></a></li>
<li class="chapter" data-level="3.5.10" data-path="efficient-data-manipulation-using-dplyr.html"><a href="efficient-data-manipulation-using-dplyr.html#task-5"><i class="fa fa-check"></i><b>3.5.10</b> Task</a></li>
<li class="chapter" data-level="3.5.11" data-path="efficient-data-manipulation-using-dplyr.html"><a href="efficient-data-manipulation-using-dplyr.html#answer-4"><i class="fa fa-check"></i><b>3.5.11</b> Answer</a></li>
<li class="chapter" data-level="3.5.12" data-path="efficient-data-manipulation-using-dplyr.html"><a href="efficient-data-manipulation-using-dplyr.html#grouping-data-and-calculating-group-wise-summary-statistics-group_by-and-summarise"><i class="fa fa-check"></i><b>3.5.12</b> Grouping data and calculating group-wise summary statistics: <code>group_by</code> and <code>summarise</code></a></li>
<li class="chapter" data-level="3.5.13" data-path="efficient-data-manipulation-using-dplyr.html"><a href="efficient-data-manipulation-using-dplyr.html#task-6"><i class="fa fa-check"></i><b>3.5.13</b> Task</a></li>
<li class="chapter" data-level="3.5.14" data-path="efficient-data-manipulation-using-dplyr.html"><a href="efficient-data-manipulation-using-dplyr.html#answer-5"><i class="fa fa-check"></i><b>3.5.14</b> Answer</a></li>
<li class="chapter" data-level="3.5.15" data-path="efficient-data-manipulation-using-dplyr.html"><a href="efficient-data-manipulation-using-dplyr.html#merging-joining-data-sets-using-the-join-type-functions"><i class="fa fa-check"></i><b>3.5.15</b> Merging (joining) data sets using the <code>join</code>-type functions</a></li>
<li class="chapter" data-level="3.5.16" data-path="efficient-data-manipulation-using-dplyr.html"><a href="efficient-data-manipulation-using-dplyr.html#additional-resources-2"><i class="fa fa-check"></i><b>3.5.16</b> Additional Resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="creating-graphics-with-ggplot2.html"><a href="creating-graphics-with-ggplot2.html"><i class="fa fa-check"></i><b>4</b> Creating Graphics with <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="4.1" data-path="ggplot-terms.html"><a href="ggplot-terms.html"><i class="fa fa-check"></i><b>4.1</b> ggplot terms</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="ggplot-terms.html"><a href="ggplot-terms.html#geometric-objects"><i class="fa fa-check"></i><b>4.1.1</b> Geometric objects</a></li>
<li class="chapter" data-level="4.1.2" data-path="ggplot-terms.html"><a href="ggplot-terms.html#aesthetics"><i class="fa fa-check"></i><b>4.1.2</b> Aesthetics</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="using-the-more-general-ggplot-interface.html"><a href="using-the-more-general-ggplot-interface.html"><i class="fa fa-check"></i><b>4.2</b> Using the more general ggplot interface</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="using-the-more-general-ggplot-interface.html"><a href="using-the-more-general-ggplot-interface.html#a-typical-ggplot-call"><i class="fa fa-check"></i><b>4.2.1</b> A typical ggplot call</a></li>
<li class="chapter" data-level="4.2.2" data-path="using-the-more-general-ggplot-interface.html"><a href="using-the-more-general-ggplot-interface.html#adding-additional-layers"><i class="fa fa-check"></i><b>4.2.2</b> Adding additional layers</a></li>
<li class="chapter" data-level="4.2.3" data-path="using-the-more-general-ggplot-interface.html"><a href="using-the-more-general-ggplot-interface.html#explicit-drawing"><i class="fa fa-check"></i><b>4.2.3</b> Explicit drawing</a></li>
<li class="chapter" data-level="4.2.4" data-path="using-the-more-general-ggplot-interface.html"><a href="using-the-more-general-ggplot-interface.html#task-7"><i class="fa fa-check"></i><b>4.2.4</b> Task</a></li>
<li class="chapter" data-level="4.2.5" data-path="using-the-more-general-ggplot-interface.html"><a href="using-the-more-general-ggplot-interface.html#answer-6"><i class="fa fa-check"></i><b>4.2.5</b> Answer</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="modifying-plots.html"><a href="modifying-plots.html"><i class="fa fa-check"></i><b>4.3</b> Modifying Plots</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="modifying-plots.html"><a href="modifying-plots.html#labels-and-titles"><i class="fa fa-check"></i><b>4.3.1</b> Labels and titles</a></li>
<li class="chapter" data-level="4.3.2" data-path="modifying-plots.html"><a href="modifying-plots.html#scales"><i class="fa fa-check"></i><b>4.3.2</b> Scales</a></li>
<li class="chapter" data-level="4.3.3" data-path="modifying-plots.html"><a href="modifying-plots.html#statistics"><i class="fa fa-check"></i><b>4.3.3</b> Statistics</a></li>
<li class="chapter" data-level="4.3.4" data-path="modifying-plots.html"><a href="modifying-plots.html#theming"><i class="fa fa-check"></i><b>4.3.4</b> Theming</a></li>
<li class="chapter" data-level="4.3.5" data-path="modifying-plots.html"><a href="modifying-plots.html#arranging-plots-faceting"><i class="fa fa-check"></i><b>4.3.5</b> Arranging plots (faceting)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="handling-date-time-data-with-lubridate.html"><a href="handling-date-time-data-with-lubridate.html"><i class="fa fa-check"></i><b>5</b> Handling date-time data with <code>lubridate</code></a>
<ul>
<li class="chapter" data-level="5.1" data-path="creating-datetimes.html"><a href="creating-datetimes.html"><i class="fa fa-check"></i><b>5.1</b> Creating date/times</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="creating-datetimes.html"><a href="creating-datetimes.html#from-strings"><i class="fa fa-check"></i><b>5.1.1</b> From strings</a></li>
<li class="chapter" data-level="5.1.2" data-path="creating-datetimes.html"><a href="creating-datetimes.html#from-individual-components"><i class="fa fa-check"></i><b>5.1.2</b> From individual components</a></li>
<li class="chapter" data-level="5.1.3" data-path="creating-datetimes.html"><a href="creating-datetimes.html#from-existing-types"><i class="fa fa-check"></i><b>5.1.3</b> From existing types</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="date-time-components.html"><a href="date-time-components.html"><i class="fa fa-check"></i><b>5.2</b> Date-time Components</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="date-time-components.html"><a href="date-time-components.html#time-spans"><i class="fa fa-check"></i><b>5.2.1</b> Time Spans</a></li>
<li class="chapter" data-level="5.2.2" data-path="date-time-components.html"><a href="date-time-components.html#durations"><i class="fa fa-check"></i><b>5.2.2</b> Durations</a></li>
<li class="chapter" data-level="5.2.3" data-path="date-time-components.html"><a href="date-time-components.html#periods"><i class="fa fa-check"></i><b>5.2.3</b> Periods</a></li>
<li class="chapter" data-level="5.2.4" data-path="date-time-components.html"><a href="date-time-components.html#intervals"><i class="fa fa-check"></i><b>5.2.4</b> Intervals</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="producing-maps-for-plotting.html"><a href="producing-maps-for-plotting.html"><i class="fa fa-check"></i><b>6</b> Producing maps for plotting</a>
<ul>
<li class="chapter" data-level="6.1" data-path="producing-maps-using-ggmap.html"><a href="producing-maps-using-ggmap.html"><i class="fa fa-check"></i><b>6.1</b> Producing maps using ggmap</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="producing-maps-using-ggmap.html"><a href="producing-maps-using-ggmap.html#task-8"><i class="fa fa-check"></i><b>6.1.1</b> Task</a></li>
<li class="chapter" data-level="6.1.2" data-path="producing-maps-using-ggmap.html"><a href="producing-maps-using-ggmap.html#answer-7"><i class="fa fa-check"></i><b>6.1.2</b> Answer</a></li>
<li class="chapter" data-level="6.1.3" data-path="producing-maps-using-ggmap.html"><a href="producing-maps-using-ggmap.html#producing-maps-using-leaflet"><i class="fa fa-check"></i><b>6.1.3</b> Producing maps using leaflet</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Visualising Data using R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="producing-maps-using-ggmap" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> Producing maps using ggmap<a href="producing-maps-using-ggmap.html#producing-maps-using-ggmap" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The R package <code>ggmap</code> can download maps from Google maps (or OpenStreetMap) which can then be used as a background layer in a <code>ggplot2</code> plot.</p>
<p>The function <code>get_map(location, zoom)</code> downloads a map. <code>location</code> can be a pair of longitude and latitude, a character string describing the location, or a bounding box. <code>zoom</code> controls the zoom level (from 3 (continent) to 21 (highest resolution)). The optional argument <code>maptype</code> can be used to select the type of map downloaded (for example <code>"roadmap"</code>, <code>"hybrid"</code> or <code>"satellite"</code> when using Google maps)</p>
<p>Note that access to the Google API (for Google map tiles and for geolocation (translation of location description to GPS coordinates) requires a Google API key. When using a bounding box and <code>"stamen"</code> as <code>source</code>, no API key is required.</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="producing-maps-using-ggmap.html#cb192-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggmap)</span>
<span id="cb192-2"><a href="producing-maps-using-ggmap.html#cb192-2" aria-hidden="true" tabindex="-1"></a>boundingbox <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">left =</span> <span class="fl">5.855</span>, <span class="at">bottom =</span> <span class="fl">51.817</span>, <span class="at">right =</span> <span class="fl">5.871</span>, <span class="at">top =</span> <span class="fl">51.826</span>)</span>
<span id="cb192-3"><a href="producing-maps-using-ggmap.html#cb192-3" aria-hidden="true" tabindex="-1"></a>map <span class="ot">&lt;-</span> <span class="fu">get_map</span>(boundingbox, <span class="at">zoom=</span><span class="dv">16</span>, <span class="at">source=</span><span class="st">&quot;stamen&quot;</span>)</span></code></pre></div>
<p>The map can the be plotted using <code>ggmap(map)</code>. Layers can be added to the map using the usual <code>ggplot2</code> commands.</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="producing-maps-using-ggmap.html#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggmap</span>(map) <span class="sc">+</span> </span>
<span id="cb193-2"><a href="producing-maps-using-ggmap.html#cb193-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_label</span>(<span class="at">x=</span><span class="fl">5.862</span>, <span class="at">y=</span><span class="fl">51.823</span>, <span class="at">label=</span><span class="st">&quot;Radboud University&quot;</span>) </span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-85-1.png" width="672" /></p>
<div id="task-8" class="section level3 hasAnchor" number="6.1.1">
<h3><span class="header-section-number">6.1.1</span> Task<a href="producing-maps-using-ggmap.html#task-8" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In this task, we will use data from two tibbles, <code>stations</code> and <code>trips</code>. These contain information on the list of bike stations of the Bay Area Bike Share system in the San Francisco Bay Area.</p>
<p>You can download the data using the following command</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="producing-maps-using-ggmap.html#cb194-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="fu">url</span>(<span class="st">&quot;https://github.com/UofGAnalyticsData/R/raw/main/Week%206/t3.RData&quot;</span>))</span></code></pre></div>
<p>It has the following columns.</p>
<table>
<thead>
<tr class="header">
<th>Column name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>station_id</code></td>
<td>Numeric identifier of the station</td>
</tr>
<tr class="even">
<td><code>name</code></td>
<td>Name of the station</td>
</tr>
<tr class="odd">
<td><code>lat</code></td>
<td>Latitude of the station</td>
</tr>
<tr class="even">
<td><code>long</code></td>
<td>Longitude of the station</td>
</tr>
<tr class="odd">
<td><code>dockcount</code></td>
<td>Number of docks at the station</td>
</tr>
<tr class="even">
<td><code>city</code></td>
<td>City in which the station is located</td>
</tr>
</tbody>
</table>
<p>The tibble <code>trips</code> contains all trips made during August 2015. It has the following columns.</p>
<table>
<colgroup>
<col width="28%" />
<col width="71%" />
</colgroup>
<thead>
<tr class="header">
<th>Column name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>trip_id</code></td>
<td>Numeric identifier of the trip</td>
</tr>
<tr class="even">
<td><code>trip_duration</code></td>
<td>Duration of the trip in seconds</td>
</tr>
<tr class="odd">
<td><code>day</code></td>
<td>Day of the month the trip was started</td>
</tr>
<tr class="even">
<td><code>hour</code></td>
<td>Decimal hour when the strip was started</td>
</tr>
<tr class="odd">
<td><code>start_station_id</code></td>
<td>Numeric identifier of the station where the trip started</td>
</tr>
<tr class="even">
<td><code>end_station_id</code></td>
<td>Numeric identifier of the station where the trip ended</td>
</tr>
<tr class="odd">
<td><code>bike_id</code></td>
<td>Numeric identifier of the bike used</td>
</tr>
<tr class="even">
<td><code>end_date</code></td>
<td>Date and time the trip ended</td>
</tr>
<tr class="odd">
<td><code>subscriber_type</code></td>
<td>User type (“Subscriber” or “Customer”)</td>
</tr>
</tbody>
</table>
<ol style="list-style-type: lower-alpha">
<li>Plot the locations of each of the bike stations. You can use the following bounding box below for your map</li>
</ol>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="producing-maps-using-ggmap.html#cb195-1" aria-hidden="true" tabindex="-1"></a>boundingbox <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">left =</span> <span class="sc">-</span><span class="fl">122.5</span>, <span class="at">bottom =</span> <span class="fl">37.25</span>, <span class="at">right =</span> <span class="sc">-</span><span class="fl">121.75</span>, <span class="at">top =</span> <span class="dv">38</span>)</span></code></pre></div>
<ol start="2" style="list-style-type: lower-alpha">
<li>(Harder) For trips within the city of San Francisco, use the code below to create an origin-destination matrix. The <span class="math inline">\((i,j)\)</span>th entry contains the number of trips from station <span class="math inline">\(i\)</span> to station <span class="math inline">\(j\)</span>.</li>
</ol>
<p>Create a plot representing the number of trips between the stations. Use the line thickness or transparency to indicate the number of trips. You can use the following bounding box below for your map</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="producing-maps-using-ggmap.html#cb196-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb196-2"><a href="producing-maps-using-ggmap.html#cb196-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb196-3"><a href="producing-maps-using-ggmap.html#cb196-3" aria-hidden="true" tabindex="-1"></a>sf_stations <span class="ot">&lt;-</span> stations <span class="sc">%&gt;%</span></span>
<span id="cb196-4"><a href="producing-maps-using-ggmap.html#cb196-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(city<span class="sc">==</span><span class="st">&quot;San Francisco&quot;</span>) </span>
<span id="cb196-5"><a href="producing-maps-using-ggmap.html#cb196-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb196-6"><a href="producing-maps-using-ggmap.html#cb196-6" aria-hidden="true" tabindex="-1"></a>od <span class="ot">&lt;-</span> trips <span class="sc">%&gt;%</span></span>
<span id="cb196-7"><a href="producing-maps-using-ggmap.html#cb196-7" aria-hidden="true" tabindex="-1"></a>         <span class="fu">filter</span>(start_station_id<span class="sc">%in%</span>sf_stations<span class="sc">$</span>station_id,</span>
<span id="cb196-8"><a href="producing-maps-using-ggmap.html#cb196-8" aria-hidden="true" tabindex="-1"></a>                end_station_id<span class="sc">%in%</span>sf_stations<span class="sc">$</span>station_id) <span class="sc">%&gt;%</span></span>
<span id="cb196-9"><a href="producing-maps-using-ggmap.html#cb196-9" aria-hidden="true" tabindex="-1"></a>         <span class="fu">group_by</span>(start_station_id, end_station_id) <span class="sc">%&gt;%</span></span>
<span id="cb196-10"><a href="producing-maps-using-ggmap.html#cb196-10" aria-hidden="true" tabindex="-1"></a>         <span class="fu">summarise</span>(<span class="at">ntrips=</span><span class="fu">n</span>()) </span></code></pre></div>
<pre><code>## `summarise()` has grouped output by &#39;start_station_id&#39;. You can override using
## the `.groups` argument.</code></pre>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="producing-maps-using-ggmap.html#cb198-1" aria-hidden="true" tabindex="-1"></a>odm <span class="ot">&lt;-</span> od <span class="sc">%&gt;%</span></span>
<span id="cb198-2"><a href="producing-maps-using-ggmap.html#cb198-2" aria-hidden="true" tabindex="-1"></a>         <span class="fu">spread</span>(end_station_id, ntrips, <span class="at">fill=</span><span class="dv">0</span>) </span>
<span id="cb198-3"><a href="producing-maps-using-ggmap.html#cb198-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-4"><a href="producing-maps-using-ggmap.html#cb198-4" aria-hidden="true" tabindex="-1"></a>odm <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(od[,<span class="sc">-</span><span class="dv">1</span>])</span>
<span id="cb198-5"><a href="producing-maps-using-ggmap.html#cb198-5" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(odm) <span class="ot">&lt;-</span> od<span class="sc">$</span>start_station_id</span>
<span id="cb198-6"><a href="producing-maps-using-ggmap.html#cb198-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-7"><a href="producing-maps-using-ggmap.html#cb198-7" aria-hidden="true" tabindex="-1"></a>od2 <span class="ot">&lt;-</span> od <span class="sc">%&gt;%</span> </span>
<span id="cb198-8"><a href="producing-maps-using-ggmap.html#cb198-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">full_join</span>(od, <span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;start_station_id&quot;</span><span class="ot">=</span><span class="st">&quot;end_station_id&quot;</span>, <span class="st">&quot;end_station_id&quot;</span><span class="ot">=</span></span>
<span id="cb198-9"><a href="producing-maps-using-ggmap.html#cb198-9" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;start_station_id&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb198-10"><a href="producing-maps-using-ggmap.html#cb198-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">replace_na</span>(<span class="fu">list</span>(<span class="at">ntrips.x=</span><span class="dv">0</span>, <span class="at">ntrips.y=</span><span class="dv">0</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb198-11"><a href="producing-maps-using-ggmap.html#cb198-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">ntrips=</span>ntrips.x<span class="sc">+</span>ntrips.y) <span class="sc">%&gt;%</span></span>
<span id="cb198-12"><a href="producing-maps-using-ggmap.html#cb198-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>ntrips.x, <span class="sc">-</span>ntrips.y) <span class="sc">%&gt;%</span></span>
<span id="cb198-13"><a href="producing-maps-using-ggmap.html#cb198-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(start_station_id<span class="sc">&lt;</span>end_station_id)</span>
<span id="cb198-14"><a href="producing-maps-using-ggmap.html#cb198-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-15"><a href="producing-maps-using-ggmap.html#cb198-15" aria-hidden="true" tabindex="-1"></a>odall <span class="ot">&lt;-</span> </span>
<span id="cb198-16"><a href="producing-maps-using-ggmap.html#cb198-16" aria-hidden="true" tabindex="-1"></a>    od2 <span class="sc">%&gt;%</span> </span>
<span id="cb198-17"><a href="producing-maps-using-ggmap.html#cb198-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">inner_join</span>(sf_stations, <span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;start_station_id&quot;</span><span class="ot">=</span><span class="st">&quot;station_id&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb198-18"><a href="producing-maps-using-ggmap.html#cb198-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">inner_join</span>(sf_stations, <span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;end_station_id&quot;</span><span class="ot">=</span><span class="st">&quot;station_id&quot;</span>), <span class="at">suffix=</span><span class="fu">c</span>(<span class="st">&quot;&quot;</span>,<span class="st">&quot;_end&quot;</span>))</span>
<span id="cb198-19"><a href="producing-maps-using-ggmap.html#cb198-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-20"><a href="producing-maps-using-ggmap.html#cb198-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-21"><a href="producing-maps-using-ggmap.html#cb198-21" aria-hidden="true" tabindex="-1"></a>boundingbox <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">left =</span> <span class="sc">-</span><span class="fl">122.43</span>, <span class="at">bottom =</span> <span class="fl">37.76</span>, <span class="at">right =</span> <span class="sc">-</span><span class="fl">122.38</span>, <span class="at">top =</span> <span class="fl">37.81</span>)</span></code></pre></div>
</div>
<div id="answer-7" class="section level3 hasAnchor" number="6.1.2">
<h3><span class="header-section-number">6.1.2</span> Answer<a href="producing-maps-using-ggmap.html#answer-7" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>For part (a) we can use the following code.</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="producing-maps-using-ggmap.html#cb199-1" aria-hidden="true" tabindex="-1"></a>boundingbox <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">left =</span> <span class="sc">-</span><span class="fl">122.5</span>, <span class="at">bottom =</span> <span class="fl">37.25</span>, <span class="at">right =</span> <span class="sc">-</span><span class="fl">121.75</span>, <span class="at">top =</span> <span class="dv">38</span>)</span>
<span id="cb199-2"><a href="producing-maps-using-ggmap.html#cb199-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb199-3"><a href="producing-maps-using-ggmap.html#cb199-3" aria-hidden="true" tabindex="-1"></a>map <span class="ot">&lt;-</span> <span class="fu">get_map</span>(boundingbox, <span class="at">zoom=</span><span class="dv">9</span>, <span class="at">source=</span><span class="st">&quot;stamen&quot;</span>)</span>
<span id="cb199-4"><a href="producing-maps-using-ggmap.html#cb199-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb199-5"><a href="producing-maps-using-ggmap.html#cb199-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggmap</span>(map) <span class="sc">+</span> </span>
<span id="cb199-6"><a href="producing-maps-using-ggmap.html#cb199-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">data=</span>stations, <span class="fu">aes</span>(<span class="at">x=</span>long, <span class="at">y=</span>lat,  <span class="at">colour=</span>city)) <span class="sc">+</span></span>
<span id="cb199-7"><a href="producing-maps-using-ggmap.html#cb199-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">&quot;Longitude&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">&quot;Latitude&quot;</span>) <span class="sc">+</span> </span>
<span id="cb199-8"><a href="producing-maps-using-ggmap.html#cb199-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">&quot;Bicycle stations in the San Francisco Bay Area&quot;</span>)</span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-89-1.png" width="672" /></p>
<p>For part (b) we can use the following code.</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="producing-maps-using-ggmap.html#cb200-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb200-2"><a href="producing-maps-using-ggmap.html#cb200-2" aria-hidden="true" tabindex="-1"></a>boundingbox <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">left =</span> <span class="sc">-</span><span class="fl">122.43</span>, <span class="at">bottom =</span> <span class="fl">37.76</span>, <span class="at">right =</span> <span class="sc">-</span><span class="fl">122.38</span>, <span class="at">top =</span> <span class="fl">37.81</span>)</span>
<span id="cb200-3"><a href="producing-maps-using-ggmap.html#cb200-3" aria-hidden="true" tabindex="-1"></a>map <span class="ot">&lt;-</span> <span class="fu">get_map</span>(boundingbox, <span class="at">zoom=</span><span class="dv">13</span>, <span class="at">source=</span><span class="st">&quot;stamen&quot;</span>)</span>
<span id="cb200-4"><a href="producing-maps-using-ggmap.html#cb200-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-5"><a href="producing-maps-using-ggmap.html#cb200-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-6"><a href="producing-maps-using-ggmap.html#cb200-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-7"><a href="producing-maps-using-ggmap.html#cb200-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggmap</span>(map) <span class="sc">+</span> </span>
<span id="cb200-8"><a href="producing-maps-using-ggmap.html#cb200-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">data=</span>sf_stations, <span class="fu">aes</span>(long, lat, <span class="at">size=</span>dockcount), <span class="at">col=</span><span class="st">&quot;orange&quot;</span>) <span class="sc">+</span></span>
<span id="cb200-9"><a href="producing-maps-using-ggmap.html#cb200-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_segment</span>(<span class="at">data=</span>odall, <span class="fu">aes</span>(long, lat, <span class="at">xend=</span>long_end, <span class="at">yend=</span>lat_end, <span class="at">alpha=</span>ntrips), <span class="at">col=</span><span class="st">&quot;orange&quot;</span>)<span class="sc">+</span></span>
<span id="cb200-10"><a href="producing-maps-using-ggmap.html#cb200-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">&quot;Longitude&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">&quot;Latitude&quot;</span>) <span class="sc">+</span> </span>
<span id="cb200-11"><a href="producing-maps-using-ggmap.html#cb200-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">&quot;Bicycle trips in San Francisco&quot;</span>)</span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-90-1.png" width="672" /></p>
</div>
<div id="producing-maps-using-leaflet" class="section level3 hasAnchor" number="6.1.3">
<h3><span class="header-section-number">6.1.3</span> Producing maps using leaflet<a href="producing-maps-using-ggmap.html#producing-maps-using-leaflet" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Maps plotted using <code>ggmap</code> cannot be panned and zoomed in and out like maps on Google Maps or OpenStreetMap. The package <code>leaflet</code> allows for this. It works somewhat the other way round than <code>ggmap</code>: rather than downloading the map and integrating it into an R plot it overlays the data over the map interface.</p>
<p>The following command puts a marker where Radboud University is located.</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="producing-maps-using-ggmap.html#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(leaflet)</span>
<span id="cb201-2"><a href="producing-maps-using-ggmap.html#cb201-2" aria-hidden="true" tabindex="-1"></a><span class="fu">leaflet</span>() <span class="sc">%&gt;%</span></span>
<span id="cb201-3"><a href="producing-maps-using-ggmap.html#cb201-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">addTiles</span>(<span class="at">urlTemplate =</span> <span class="st">&quot;http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb201-4"><a href="producing-maps-using-ggmap.html#cb201-4" aria-hidden="true" tabindex="-1"></a>   <span class="fu">addMarkers</span>(<span class="at">lng=</span><span class="fl">5.862</span>, <span class="at">lat=</span><span class="fl">51.823</span>, <span class="at">popup=</span><span class="st">&quot;Radboud University&quot;</span>)</span></code></pre></div>
<p>The argument <code>urlTemplate</code> is only required when opening the file locally.</p>
<div class="figure">
<img src="leaflet1.png" alt="" />
<p class="caption">Leaflet map showing Radboud University</p>
</div>
<p>Lines can be added to the map using the function <code>addPolylines</code>.</p>
<p>The data frame <code>subway</code> contains the GPS coordinates of all subway stations in Glasgow. You can produce a map of the Glasgow subway network using the following code. (You should have access to this data frame from the previous download).</p>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="producing-maps-using-ggmap.html#cb202-1" aria-hidden="true" tabindex="-1"></a>subway2 <span class="ot">&lt;-</span> <span class="fu">rbind</span>(subway, subway[<span class="dv">1</span>,])     <span class="co"># Make sure line goes back to Hillhead</span></span>
<span id="cb202-2"><a href="producing-maps-using-ggmap.html#cb202-2" aria-hidden="true" tabindex="-1"></a><span class="fu">leaflet</span>() <span class="sc">%&gt;%</span>   </span>
<span id="cb202-3"><a href="producing-maps-using-ggmap.html#cb202-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">addTiles</span>(<span class="at">urlTemplate =</span> <span class="st">&quot;http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb202-4"><a href="producing-maps-using-ggmap.html#cb202-4" aria-hidden="true" tabindex="-1"></a>   <span class="fu">addMarkers</span>(<span class="at">lng=</span><span class="sc">-</span><span class="fl">4.2885</span>, <span class="at">lat=</span><span class="fl">55.8715</span>, <span class="at">popup=</span><span class="st">&quot;The University of Glasgow&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb202-5"><a href="producing-maps-using-ggmap.html#cb202-5" aria-hidden="true" tabindex="-1"></a>   <span class="fu">addPolylines</span>(subway2<span class="sc">$</span>long, subway2<span class="sc">$</span>lat, <span class="at">color=</span><span class="st">&quot;#ff6200&quot;</span>, <span class="at">opacity=</span><span class="fl">0.5</span>, <span class="at">weight=</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb202-6"><a href="producing-maps-using-ggmap.html#cb202-6" aria-hidden="true" tabindex="-1"></a>   <span class="fu">addCircleMarkers</span>(subway<span class="sc">$</span>long, subway<span class="sc">$</span>lat, <span class="at">popup=</span>subway<span class="sc">$</span>station, <span class="at">color=</span><span class="st">&quot;#ff6200&quot;</span>, </span>
<span id="cb202-7"><a href="producing-maps-using-ggmap.html#cb202-7" aria-hidden="true" tabindex="-1"></a>                    <span class="at">opacity=</span><span class="dv">1</span>, <span class="at">fillColor=</span><span class="st">&quot;#4d4f53&quot;</span>, <span class="at">fillOpacity=</span><span class="dv">1</span>) </span></code></pre></div>
<div class="figure">
<img src="leaflet2.png" alt="" />
<p class="caption">Leaflet map showing the Glasgow Subway</p>
</div>

</div>
</div>
<!-- </div> -->
            </section>

          </div>
        </div>
      </div>
<a href="producing-maps-for-plotting.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="assets/gitbook-2.6.7/js/app.min.js"></script>
<script src="assets/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="assets/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/05-mapping.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
},
"toolbar": {
"position": "static"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
