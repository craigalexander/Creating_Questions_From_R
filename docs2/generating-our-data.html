<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3.2 Generating our data | Using R to generate data for questions</title>
  <meta name="description" content="3.2 Generating our data | Using R to generate data for questions" />
  <meta name="generator" content="bookdown 0.30 and GitBook 2.6.7" />

  <meta property="og:title" content="3.2 Generating our data | Using R to generate data for questions" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3.2 Generating our data | Using R to generate data for questions" />
  
  
  

<meta name="author" content="Craig Alexander &amp; Eilidh Jack" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="question.html"/>

<script src="assets/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="assets/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<script src="assets/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="assets/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="assets/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="assets/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Overview</a><ul>
<li class="chapter" data-level="1.1" data-path="libraries.html"><a href="libraries.html"><i class="fa fa-check"></i><b>1.1</b> Libraries</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="paper-1-example.html"><a href="paper-1-example.html"><i class="fa fa-check"></i><b>2</b> 2021 Paper 1 Example</a><ul>
<li class="chapter" data-level="2.1" data-path="question-1.html"><a href="question-1.html"><i class="fa fa-check"></i><b>2.1</b> Question 1</a><ul>
<li class="chapter" data-level="2.1.1" data-path="question-1.html"><a href="question-1.html#generating-a-random-sample-of-data"><i class="fa fa-check"></i><b>2.1.1</b> Generating a random sample of data</a></li>
<li class="chapter" data-level="2.1.2" data-path="question-1.html"><a href="question-1.html#visualising-the-data"><i class="fa fa-check"></i><b>2.1.2</b> Visualising the data</a></li>
<li class="chapter" data-level="2.1.3" data-path="question-1.html"><a href="question-1.html#setting-random-seeds-for-reproducability"><i class="fa fa-check"></i><b>2.1.3</b> Setting random seeds for reproducability</a></li>
<li class="chapter" data-level="2.1.4" data-path="question-1.html"><a href="question-1.html#manually-editing-data"><i class="fa fa-check"></i><b>2.1.4</b> Manually editing data</a></li>
<li class="chapter" data-level="2.1.5" data-path="question-1.html"><a href="question-1.html#sampling-from-different-distributions"><i class="fa fa-check"></i><b>2.1.5</b> Sampling from different distributions</a></li>
<li class="chapter" data-level="2.1.6" data-path="question-1.html"><a href="question-1.html#performing-a-mann-whitney-test"><i class="fa fa-check"></i><b>2.1.6</b> Performing a Mann-Whitney Test</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="performing-a-z-test.html"><a href="performing-a-z-test.html"><i class="fa fa-check"></i><b>2.2</b> Performing a z-test</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="linear-model-example.html"><a href="linear-model-example.html"><i class="fa fa-check"></i><b>3</b> Linear model example</a><ul>
<li class="chapter" data-level="3.1" data-path="question.html"><a href="question.html"><i class="fa fa-check"></i><b>3.1</b> Question</a></li>
<li class="chapter" data-level="3.2" data-path="generating-our-data.html"><a href="generating-our-data.html"><i class="fa fa-check"></i><b>3.2</b> Generating our data</a><ul>
<li class="chapter" data-level="3.2.1" data-path="generating-our-data.html"><a href="generating-our-data.html#explanatory-variable"><i class="fa fa-check"></i><b>3.2.1</b> Explanatory variable</a></li>
<li class="chapter" data-level="3.2.2" data-path="generating-our-data.html"><a href="generating-our-data.html#using-a-linear-model-to-generate-the-response"><i class="fa fa-check"></i><b>3.2.2</b> Using a linear model to generate the response</a></li>
<li class="chapter" data-level="3.2.3" data-path="generating-our-data.html"><a href="generating-our-data.html#fitting-a-linear-model"><i class="fa fa-check"></i><b>3.2.3</b> Fitting a linear model</a></li>
<li class="chapter" data-level="3.2.4" data-path="generating-our-data.html"><a href="generating-our-data.html#adding-the-linear-model-line-to-a-scatterplot"><i class="fa fa-check"></i><b>3.2.4</b> Adding the linear model line to a scatterplot</a></li>
<li class="chapter" data-level="3.2.5" data-path="generating-our-data.html"><a href="generating-our-data.html#producing-model-diagnostics"><i class="fa fa-check"></i><b>3.2.5</b> Producing model diagnostics</a></li>
<li class="chapter" data-level="3.2.6" data-path="generating-our-data.html"><a href="generating-our-data.html#calculating-quantities-of-interest"><i class="fa fa-check"></i><b>3.2.6</b> Calculating quantities of interest</a></li>
<li class="chapter" data-level="3.2.7" data-path="generating-our-data.html"><a href="generating-our-data.html#summary"><i class="fa fa-check"></i><b>3.2.7</b> Summary</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Using R to generate data for questions</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="generating-our-data" class="section level2 hasAnchor">
<h2><span class="header-section-number">3.2</span> Generating our data<a href="generating-our-data.html#generating-our-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In order to fit this linear model we need to generate two variables:</p>
<ul>
<li>Response variable (<span class="math inline">\(y\)</span>): <span class="math inline">\(waste\)</span> and</li>
<li>Explanatory variable (<span class="math inline">\(x\)</span>): <span class="math inline">\(temperature\)</span>.</li>
</ul>
<p>Crucially, these variables need to be associated with each other as shown in the linear model equation.</p>
<div id="explanatory-variable" class="section level3 hasAnchor">
<h3><span class="header-section-number">3.2.1</span> Explanatory variable<a href="generating-our-data.html#explanatory-variable" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let’s start by generating our x-variable, <span class="math inline">\(temperature\)</span>. We will use a Normal distribution to do this since our variable is continuous.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="generating-our-data.html#cb23-1"></a>temp&lt;-<span class="kw">rnorm</span>(<span class="dt">n=</span><span class="dv">34</span>, <span class="dt">mean=</span><span class="dv">12</span>, <span class="dt">sd=</span><span class="dv">4</span>)</span></code></pre></div>
<p>The parameters required are defined as follows:</p>
<ul>
<li><code>n</code> - the number of samples we wish to draw. In our question <span class="math inline">\(df=32\)</span>, so <span class="math inline">\(n=34\)</span> (since for a simple linear model <span class="math inline">\(df=n-2\)</span>).</li>
<li><code>mean</code> - the mean temperature which our data will be centered on. Pick something sensible here, we have gone for <span class="math inline">\(12^{\circ}\)</span>C.</li>
<li><code>sd</code> - the standard deviation for <span class="math inline">\(temperature\)</span>. Again go for something that seems sensible (high enough to show some variability, but not too high that the values at the extreme are no longer sensible). This can take a bit of trial and error.</li>
</ul>
<p>Let’s take a look at our simulated data to check that is looks sensible. To do this we will the <code>geom_histogram()</code> function that we used in our previous example.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="generating-our-data.html#cb24-1"></a><span class="kw">ggplot</span>(<span class="kw">data.frame</span>(temp),<span class="kw">aes</span>(<span class="dt">x=</span>temp)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb24-2"><a href="generating-our-data.html#cb24-2"></a><span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">color=</span><span class="st">&quot;black&quot;</span>,<span class="dt">fill=</span><span class="st">&quot;white&quot;</span>, <span class="dt">bins=</span><span class="dv">10</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb24-3"><a href="generating-our-data.html#cb24-3"></a><span class="st">            </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;Average temperature&quot;</span>)</span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/xhist-1.png" width="672" /></p>
<p><strong>Exercise</strong>
Change the values of the <code>mean</code> and <code>sd</code> in the code above and plot a histogram of the newly simulated <span class="math inline">\(x\)</span> value to see how the data changes.</p>
</div>
<div id="using-a-linear-model-to-generate-the-response" class="section level3 hasAnchor">
<h3><span class="header-section-number">3.2.2</span> Using a linear model to generate the response<a href="generating-our-data.html#using-a-linear-model-to-generate-the-response" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In order to generate the response variable <span class="math inline">\(y\)</span> we need to choose a sensible linear model which will relate the explantory variable <span class="math inline">\(x\)</span> to the response variable <span class="math inline">\(y\)</span>.</p>
<p>To specify a simple linear model we need to choose two values, the intercept, <span class="math inline">\(\alpha\)</span>, and the slope, <span class="math inline">\(\beta\)</span>. In this example we want to estimate ice cream waste from average temperature, we are therefore going to assume there is a <em>negative</em> relationship between these variables, i.e. the warmer it is, the more ice cream you will sell! Therefore, the slope parameter (<span class="math inline">\(\beta\)</span>) should be negative. The size of this will depend on what you think is a sensible interpretation. Here let’s go for -10.65, so for every unit increase in average temperature, ice cream waste decreases by 10.65kg. For the intercept, again think about a sensible value based on the context. Remember this value is where the regression line will cut the y-axis. Let’s choose 591. The choice for <span class="math inline">\(\alpha\)</span> and <span class="math inline">\(\beta\)</span> will be subjective, and might take some trial and error before deciding on your final values. Just make sure that the interpretation of the final model is sensible.</p>
<p>We can now generate the response variable, <span class="math inline">\(y\)</span> as follows:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="generating-our-data.html#cb25-1"></a>waste&lt;-<span class="dv">591</span> <span class="op">-</span><span class="st"> </span><span class="fl">10.65</span><span class="op">*</span>temp</span></code></pre></div>
<p>where</p>
<ul>
<li>591 is our chosen value for <span class="math inline">\(\alpha\)</span>,</li>
<li>-10.65 is our chosen value for <span class="math inline">\(\beta\)</span>,</li>
<li><code>temp</code> is the x-variable we have already simulated.</li>
</ul>
<p>Let’s now produce a scatterplot of our data using <code>ggplot2</code>. We will use a similar structure to the plots we have produced previously but we will use the <code>geom_point()</code> function to produce a scatterplot as follows:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="generating-our-data.html#cb26-1"></a>data&lt;-<span class="kw">data.frame</span>(<span class="dt">waste=</span>waste, <span class="dt">temp=</span>temp)</span>
<span id="cb26-2"><a href="generating-our-data.html#cb26-2"></a></span>
<span id="cb26-3"><a href="generating-our-data.html#cb26-3"></a><span class="kw">ggplot</span>(data, <span class="kw">aes</span>(<span class="dt">x=</span>temp, <span class="dt">y=</span>waste)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb26-4"><a href="generating-our-data.html#cb26-4"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb26-5"><a href="generating-our-data.html#cb26-5"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;Average temperature&quot;</span>, <span class="dt">y=</span><span class="st">&quot;Ice cream waste&quot;</span>)</span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/xyscatter-1.png" width="672" /></p>
<p>To create this scatterplot we first had to store our two variables in a <em>dataframe</em> which we called <code>data</code>. Here we are creating a dataframe with two columns which we have given the same names as the two data vectors we have already created, namely <code>waste</code> and <code>temp</code>. In these columns we are simply storing the data vectors we have simulated above. We then create the scatterplot which works as follows:</p>
<ul>
<li>First we specify our data using <code>ggplot(data)</code>.</li>
<li>We then specify the variables we want to plot using the <code>aes()</code> argument, where <code>x=temp</code> and <code>y=waste</code>.</li>
<li>We then generate the scatterplot using <code>geom_point()</code>. Here we have used the default values so we don’t need to specify anything within this function.</li>
<li>Finally, we label our x and y axis using the <code>labs</code> function.</li>
</ul>
<p>Now, you may have noticed that our scatterplot has identified an issue with the data we have generated. The code we have used has produced a perfect linear relationship between <span class="math inline">\(temperature\)</span> and <span class="math inline">\(waste\)</span>. This does not seem realistic so we need to add some random noise to <span class="math inline">\(y\)</span>. We can do this by adding some randomly generated values from a normal distribution with mean 0. Think of this as adding residuals to our model.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="generating-our-data.html#cb27-1"></a>waste&lt;-<span class="dv">591</span> <span class="op">-</span><span class="st"> </span><span class="fl">10.65</span><span class="op">*</span>temp <span class="op">+</span><span class="st"> </span><span class="kw">rnorm</span>(<span class="dt">n=</span><span class="dv">34</span>, <span class="dt">mean=</span><span class="dv">0</span>, <span class="dt">sd=</span><span class="dv">20</span>)</span></code></pre></div>
<p>We always want the model residuals to be centered on 0, so the mean within <code>rnorm()</code> should be 0. The level of variability within <span class="math inline">\(y\)</span> can be controlled via the standard deviation (<code>sd</code>). Again, this might take some trial and error to get something you are happy with.</p>
<p>Let’s take a look at the scatterplot with our newly generated response.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="generating-our-data.html#cb28-1"></a>data&lt;-<span class="kw">data.frame</span>(<span class="dt">waste=</span>waste, <span class="dt">temp=</span>temp)</span>
<span id="cb28-2"><a href="generating-our-data.html#cb28-2"></a></span>
<span id="cb28-3"><a href="generating-our-data.html#cb28-3"></a><span class="kw">ggplot</span>(data, <span class="kw">aes</span>(<span class="dt">x=</span>temp, <span class="dt">y=</span>waste)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb28-4"><a href="generating-our-data.html#cb28-4"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb28-5"><a href="generating-our-data.html#cb28-5"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;Average temperature&quot;</span>, <span class="dt">y=</span><span class="st">&quot;Ice cream waste&quot;</span>)</span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/xyscatter2-1.png" width="672" /></p>
<p>That looks better!</p>
<p><strong>Exercise</strong>
1. Change the values of <span class="math inline">\(\alpha\)</span> and <span class="math inline">\(\beta\)</span> in the code above to see how the relationship between <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> changes.
2. Alter the value of <code>sd</code> in the code above to control the level of variation in the <span class="math inline">\(y\)</span>.</p>
</div>
<div id="fitting-a-linear-model" class="section level3 hasAnchor">
<h3><span class="header-section-number">3.2.3</span> Fitting a linear model<a href="generating-our-data.html#fitting-a-linear-model" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Now that we have simulated values for <span class="math inline">\(temperature\)</span> and <span class="math inline">\(waste\)</span> we can now fit a linear model and generate output that can be used to create questions.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="generating-our-data.html#cb29-1"></a>model&lt;-<span class="kw">lm</span>(waste<span class="op">~</span>temp)</span>
<span id="cb29-2"><a href="generating-our-data.html#cb29-2"></a><span class="kw">summary</span>(model)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = waste ~ temp)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -38.514 -11.412  -2.084  10.421  45.052 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 596.9391    11.8702   50.29  &lt; 2e-16 ***
## temp        -10.9101     0.9153  -11.92 2.62e-13 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 18.85 on 32 degrees of freedom
## Multiple R-squared:  0.8162, Adjusted R-squared:  0.8104 
## F-statistic: 142.1 on 1 and 32 DF,  p-value: 2.62e-13</code></pre>
<p>Note that the estimates for <span class="math inline">\(\alpha\)</span> and <span class="math inline">\(\beta\)</span> are slightly different to the values we used to generate the data. This is because of the random noise we added when generating our response variable. The values are fairly similar though. Notice how these values correspond with the linear model used in the question at the top on the page, and how we have used the standard error from the output table when asking for a 95% CI for the slope parameter (although this may be beyond the scope for the AH stats cirriculum).</p>
</div>
<div id="adding-the-linear-model-line-to-a-scatterplot" class="section level3 hasAnchor">
<h3><span class="header-section-number">3.2.4</span> Adding the linear model line to a scatterplot<a href="generating-our-data.html#adding-the-linear-model-line-to-a-scatterplot" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We can now add our fitted model and 95% confidence interval to the scatterplot of our data using the following code.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="generating-our-data.html#cb31-1"></a><span class="kw">ggplot</span>(data, <span class="kw">aes</span>(<span class="dt">x=</span>temp, <span class="dt">y=</span>waste)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb31-2"><a href="generating-our-data.html#cb31-2"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb31-3"><a href="generating-our-data.html#cb31-3"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;Average temperature&quot;</span>, <span class="dt">y=</span><span class="st">&quot;Ice cream waste&quot;</span>)<span class="op">+</span></span>
<span id="cb31-4"><a href="generating-our-data.html#cb31-4"></a><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method=</span><span class="st">&quot;lm&quot;</span>, <span class="dt">se=</span><span class="ot">TRUE</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula = &#39;y ~ x&#39;</code></pre>
<p><img src="bookdown-demo_files/figure-html/xyscatter3-1.png" width="672" /></p>
<p>To generate this plot we have used the same code as previously and added the <code>geom_smooth()</code> with the following arguments:</p>
<ul>
<li><code>method = lm</code> - fit a linear model line to the plot.</li>
<li><code>se = TRUE</code> - display a confidence interval around the line. This can be removed by setting <code>se=FALSE</code>.</li>
</ul>
</div>
<div id="producing-model-diagnostics" class="section level3 hasAnchor">
<h3><span class="header-section-number">3.2.5</span> Producing model diagnostics<a href="generating-our-data.html#producing-model-diagnostics" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We can use the <code>autoplot()</code> function in the <code>ggfortify</code> library to create diagnostic plots for our linear model using <code>ggplot2</code> as follows:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="generating-our-data.html#cb33-1"></a><span class="kw">autoplot</span>(model)</span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/modeldiag-1.png" width="672" /></p>
</div>
<div id="calculating-quantities-of-interest" class="section level3 hasAnchor">
<h3><span class="header-section-number">3.2.6</span> Calculating quantities of interest<a href="generating-our-data.html#calculating-quantities-of-interest" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You can also calculate quantities such as <span class="math inline">\(S_{xx}, S_{yy}\)</span> and <span class="math inline">\(S_{xy}\)</span> to be used in questions for calcuating estimates by hand.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="generating-our-data.html#cb34-1"></a>S.xx &lt;-<span class="st"> </span><span class="kw">sum</span>((temp <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>(temp))<span class="op">^</span><span class="dv">2</span>)</span>
<span id="cb34-2"><a href="generating-our-data.html#cb34-2"></a>S.yy &lt;-<span class="st"> </span><span class="kw">sum</span>((waste <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>(waste))<span class="op">^</span><span class="dv">2</span>)</span>
<span id="cb34-3"><a href="generating-our-data.html#cb34-3"></a>S.xy &lt;-<span class="st"> </span><span class="kw">sum</span>((temp <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>(temp)) <span class="op">*</span><span class="st"> </span>(waste <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>(waste)))</span>
<span id="cb34-4"><a href="generating-our-data.html#cb34-4"></a></span>
<span id="cb34-5"><a href="generating-our-data.html#cb34-5"></a>r &lt;-<span class="st"> </span>S.xy<span class="op">/</span>(<span class="kw">sqrt</span>(S.xx<span class="op">*</span>S.yy))</span>
<span id="cb34-6"><a href="generating-our-data.html#cb34-6"></a>beta &lt;-<span class="st"> </span>S.xy<span class="op">/</span>S.xx</span>
<span id="cb34-7"><a href="generating-our-data.html#cb34-7"></a>alpha &lt;-<span class="st"> </span><span class="kw">mean</span>(waste) <span class="op">-</span><span class="st"> </span>beta<span class="op">*</span><span class="kw">mean</span>(temp)</span>
<span id="cb34-8"><a href="generating-our-data.html#cb34-8"></a></span>
<span id="cb34-9"><a href="generating-our-data.html#cb34-9"></a>r</span></code></pre></div>
<pre><code>## [1] -0.9034156</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="generating-our-data.html#cb36-1"></a>beta</span></code></pre></div>
<pre><code>## [1] -10.91007</code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="generating-our-data.html#cb38-1"></a>alpha</span></code></pre></div>
<pre><code>## [1] 596.9391</code></pre>
</div>
<div id="summary" class="section level3 hasAnchor">
<h3><span class="header-section-number">3.2.7</span> Summary<a href="generating-our-data.html#summary" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Using <code>R</code> to generate data can be a quick and simple way to create practice questions for students. It can also be helpful to demonstrate certain properties when introducing concepts in class. Another benefit is to allow the creation of multiple variants of the same question, all with slighty different data, and therefore slightly different answers. This can be particularly helpful for revision questions that students can attempt more than once, or in assessments so that all students have slightly different questions/answers.</p>
<p>However, in general we would advise using real data when introducing/demonstrating concepts in class as this allows students to appreciate the use of statistics in real-life scenarios and also allows for discussions around dealing with messy data.</p>

</div>
</div>
<!-- </div> -->
            </section>

          </div>
        </div>
      </div>
<a href="question.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="assets/gitbook-2.6.7/js/app.min.js"></script>
<script src="assets/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="assets/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/02-regression.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
},
"toolbar": {
"position": "static"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
